select
  match event of
    case r=%{ message ~= json||} => 
      match r.message of
        case %{ present application, present date, present message } =>
          { "ok": merge event of { "host": system::hostname() } end }
        default => { "error": "invalid", "got": event }
      end
    default => { "error": "malformed", "got": event }
  end
from in into out;

